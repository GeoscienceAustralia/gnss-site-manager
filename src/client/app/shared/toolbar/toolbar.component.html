<div class="container centered clear-pad">
  <span dropdown class="btn-group pull-left">
    <button dropdownToggle id="left-menu" type="button" class="btn menu-btn">
      <i class="glyphicon glyphicon-menu-hamburger"></i>
    </button>
    <ul dropdownMenu role="menu" aria-labelledby="menu-button">
      <li role="menuitem"><a [routerLink]="['/']">Select Site</a></li>
      <li role="menuitem"><a [routerLink]="['/about']">About</a></li>
      <!-- TODO: Disable service worker for now -->
      <!-- <li class="divider dropdown&#45;divider"></li> -->
      <!-- <li role="menuitem"><a (click)="clearCache()">Update Application</a></li> -->
    </ul>
  </span>
  <span class="title">GNSS Site Manager</span>
  <span class="pull-right">
    <span class="hidden-xs">
      <span *ngIf="siteId">
        <span class="id-label">Selected Site: {{siteId}}</span>
        <button class="btn small-btn" (click)="save()" [disabled]="!hasFormChanged()" title="Review and save changes">Save</button>
        <button class="btn small-btn" (click)="revert()" title="Discard changes">Revert</button>
        <button class="btn small-btn" (click)="close()" title="Close current page and go back to Home page">Close</button>
      </span>
    </span>
    <span class="hidden-sm hidden-md hidden-lg" *ngIf="siteId">
      <div dropdown class="pull-left">
        <nav dropdownToggle id="site-id-menu" class="menu-label">
          <span class="btn-label">{{siteId}}</span>
          <i class="glyphicon glyphicon-triangle-bottom dropdown-icon"></i>
        </nav>
        <ul dropdownMenu role="menu" aria-labelledby="menu-button" class="dropdown-menu-right">
          <li role="menuitem"><a (click)="save()" title="Review and save changes">Save</a></li>
          <li role="menuitem"><a (click)="revert()" title="Discard changes">Revert</a></li>
          <li class="divider dropdown-divider"></li>
          <li role="menuitem"><a (click)="close()">Close</a></li>
        </ul>
      </div>
    </span>
    <span *ngIf="!user">
        <button class="btn small-btn" (click)="login()">Login</button>
    </span>
    <span *ngIf="user">
        <div dropdown class="pull-right">
            <nav dropdownToggle id="user-menu" class="menu-label">
              <span class="btn-label">{{user.profile.sub}}</span>
              <i class="glyphicon glyphicon-triangle-bottom dropdown-icon"></i>
            </nav>
            <ul dropdownMenu role="menu" aria-labelledby="menu-button" class="dropdown-menu-right">
              <li role="menuitem"><a>Show Profile</a></li>
              <li role="menuitem"><a>{{user.profile.authorities[0]}}</a></li>
              <li class="divider dropdown&#45;divider"></li>
              <li role="menuitem"><a (click)="changePassword()">Change Password</a></li>
              <li class="divider dropdown&#45;divider"></li>
              <li role="menuitem"><a (click)="logout()">Logout</a></li>
            </ul>
        </div>
    </span>
  </span>
</div>
