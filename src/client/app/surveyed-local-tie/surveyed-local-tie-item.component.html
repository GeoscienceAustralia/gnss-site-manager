<div [formGroup]="itemGroup" class="panel panel-level-2" [ngClass]="{'gnss-dirty': isFormDirty(), 'gnss-invalid': isFormInvalid()}">
    <div class="panel-heading item-header">
        <span class="panel-title cursor-ptr" tabindex="0"
            (keyup.space)="toggleGroup($event)"
            (keyup.enter)="toggleGroup($event)"
            (click)="toggleGroup($event)">
            <i class="glyphicon"
               [ngClass]="{'glyphicon-minus-sign': isOpen, 'glyphicon-plus-sign': !isOpen}">
            </i>
            <span [innerHTML]="getItemHeaderHtml()"></span>
        </span>
        <span *ngIf="surveyedLocalTie.dateDeleted" class="delete-marker"
            title="It will be deleted when saving all changes for the site">
            (<span [ngClass]="{'hidden-xxxs': index != 0}">marked </span>to delete)
        </span>
        <span class="pull-right" [ngClass]="{'hidden-xs': surveyedLocalTie.dateDeleted}">
            <button type="button" [disabled]="isDeleteDisabled()"
                  class="btn btn-danger btn-xs"
                  title="{{getRemoveOrDeletedText()}} the surveyed local tie"
                  (click)="removeItem(index)">
            <i class="glyphicon glyphicon-remove"></i>
            <span class="hidden-xs">{{getRemoveOrDeletedText()}}</span>
        </button>
        </span>
    </div>
    <div class="panel-body item-body" [hidden]="!isOpen">
        <div *ngIf=" surveyedLocalTie == null ">
            No information available for Surveyed Local Ties
        </div>
        <div *ngIf="surveyedLocalTie != null" [ngClass]="{'container-dirty': surveyedLocalTie.dateDeleted}">
            <div class="form-group">
                <text-input formControlName="tiedMarkerName" controlName="tiedMarkerName" [form]="itemGroup">Tied Marker Name</text-input>
                <text-input formControlName="tiedMarkerUsage" controlName="tiedMarkerUsage" [form]="itemGroup">Tied Marker Usage</text-input>
                <text-input formControlName="tiedMarkerCDPNumber" controlName="tiedMarkerCDPNumber" [form]="itemGroup">Tied Marker CDP Number</text-input>
                <text-input formControlName="tiedMarkerDOMESNumber" controlName="tiedMarkerDOMESNumber" [form]="itemGroup">Tied Marker DOMES Number</text-input>
                <number-input formControlName="dx" controlName="dx" [form]="itemGroup">dx (m)</number-input>
                <number-input formControlName="dy" controlName="dy" [form]="itemGroup">dy (m)</number-input>
                <number-input formControlName="dz" controlName="dz" [form]="itemGroup">dz (m)</number-input>
                <number-input formControlName="localSiteTiesAccuracy" controlName="localSiteTiesAccuracy" [form]="itemGroup">Local Site Ties Accuracy (mm)</number-input>
                <text-input formControlName="surveyMethod" controlName="surveyMethod" [form]="itemGroup">Survey Method</text-input>
                <datetime-input [form]="itemGroup" controlName="startDate" [required]="false">Date Measured (UTC)</datetime-input>
                <textarea-input rows="2" formControlName="notes" controlName="notes" [form]="itemGroup">Notes</textarea-input>
            </div>
        </div>
    </div>
</div>
